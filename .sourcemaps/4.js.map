{"version":3,"sources":["../../src/pages/auth/login-modal/login-modal.module.ts","../../src/pages/auth/login-modal/login-modal.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginModalPage } from './login-modal';\n\n\n@NgModule({\n  declarations: [\n    LoginModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginModalPage)\n  ],\n  exports: [\n    LoginModalPage\n  ]\n})\nexport class LoginModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/auth/login-modal/login-modal.module.ts","import { Component } from '@angular/core';\nimport {\n  IonicPage, NavController, ToastController,\n  ViewController\n} from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\n\nimport {UserData} from \"../../../app/core/user-data\";\nimport {LoadingService} from \"../../../services/loading-service\";\nimport {AuthServiceProvider} from \"../../../services/auth-service\";\nimport {DeviseAuthServiceProvider} from \"../../../services/devise-auth-service\";\n\n\n/**\n * Generated class for the LoginModalPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-login-modal',\n  templateUrl: 'login-modal.html',\n})\nexport class LoginModalPage {\n\n  data: any;\n  display_name:any = {\n    fb: '',\n    google: ''\n  };\n\n  constructor(public viewCtrl: ViewController, public navCtrl: NavController,private toastCtrl: ToastController\n    ,private storage: Storage,private userData: UserData, public loadingService: LoadingService, private authService: AuthServiceProvider) {\n  }\n\n\n  fbLogin() {\n    this.loadingService.show();\n    this.authService.fbLogin().then(success => {\n      console.log(\"RESULT: \" + JSON.stringify(success));\n      this.loadingService.hide();\n      this.presentToast(\"logged In\", \"toast-success\");\n\n      this.confirmOauth('facebook', success['access_token']);\n    }, error => {\n      console.log(\"ERROR: \", error);\n      this.loadingService.hide();\n      this.presentToast(\"Login Failed. Try Later.\", \"toast-error\");\n    });\n  }\n\n  googleLogin() {\n    this.loadingService.show();\n\n  }\n\n  _parseAuthConfirm(data){\n    if (data.status === \"success\"){\n      this.storage.set('jwt_token', data.token);\n      this.userData.isAuthenticated = true;\n\n      this.presentToast(\"logged In\", \"toast-success\");\n\n      this.navCtrl.setRoot('MainPage');\n    }\n    else {\n      this.presentToast(\"Login Failed. Try Later.\", \"toast-error\");\n    }\n  }\n\n  confirmOauth(provider:string, token:string) {\n    this.authService.confirmProviderLogin(provider, token);\n  }\n\n  presentToast(msg, cssClass): Promise<any> {\n    let toast = this.toastCtrl.create({\n      message: msg,\n      duration: 3000,\n      position: 'bottom',\n      dismissOnPageChange: true,\n      cssClass: cssClass\n    });\n\n    return toast.present();\n  }\n\n  ionViewDidLoad() {\n    this.storage.get('last_login:social:google_name').then((val) => {\n      this.display_name.google = val;\n    });\n    this.storage.get('last_login:social:fb_name').then((val) => {\n      this.display_name.fb = val;\n    });\n  }\n\n  dismiss(data) {\n    this.viewCtrl.dismiss(data);\n  }\n\n  openPage(page) {\n     this.navCtrl.push(page);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/auth/login-modal/login-modal.ts"],"sourceRoot":""}