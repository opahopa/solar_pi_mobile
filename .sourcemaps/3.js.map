{"version":3,"sources":["../../src/pages/wallet/wallet.module.ts","../../src/pages/wallet/wallet.ts","../../src/providers/wallet/wallet.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { WalletPage } from './wallet';\n\n@NgModule({\n  declarations: [\n    WalletPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(WalletPage),\n  ],\n})\nexport class WalletPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/wallet/wallet.module.ts","import {Component, Inject} from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport {APP_CONFIG, IAppConfig} from \"../../app/app.config\";\nimport {Broadcaster, Ng2Cable} from \"ng2-cable\";\nimport {WalletProvider} from \"../../providers/wallet/wallet\";\n\n/**\n * Generated class for the WalletPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-wallet',\n  templateUrl: 'wallet.html',\n})\nexport class WalletPage {\n  cableHost: string ;\n  device_id:number = 1;\n\n  balance: number;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, @Inject(APP_CONFIG) private config: IAppConfig,\n          private ng2cable: Ng2Cable, private broadcaster: Broadcaster, private walletProvider: WalletProvider) {\n    this.cableHost = this.config.apiEndpoint + '/cable';\n    this.initWebsock();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad WalletPage');\n  }\n\n  ionViewDidLeave() {\n    this.ng2cable.unsubscribe();\n  }\n\n  initWebsock() {\n    this.ng2cable.subscribe(this.cableHost, 'WalletChannel',  { device_id: this.device_id });\n    console.log(\"Here #0\")\n    //By default event name is 'channel name'. But you can pass from backend field { action: 'MyEventName'}\n\n    this.broadcaster.on<string>(`device_${this.device_id}`).subscribe(\n      message => {\n        console.log(\"Here #1\")\n        console.log(message);\n        if (message['type'] === 'balance:responce') {\n          this.balance = message['data'];\n        }\n      }\n    );\n  }\n\n\n  requestBalance() {\n    this.walletProvider.requestBalance(1).subscribe((data)=>{\n      console.log(data)\n    });\n    console.log(\"Here #3\")\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/wallet/wallet.ts","import {Inject, Injectable} from '@angular/core';\nimport { Http } from '@angular/http';\nimport 'rxjs/add/operator/map';\n\nimport {Observable} from \"rxjs/Observable\";\nimport 'rxjs/add/observable/throw';\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/operator/finally';\n\nimport {APP_CONFIG, IAppConfig} from \"../../app/app.config\";\n\n/*\n  Generated class for the WalletProvider provider.\n\n  See https://angular.io/docs/ts/latest/guide/dependency-injection.html\n  for more info on providers and Angular DI.\n*/\n@Injectable()\nexport class WalletProvider {\n\n  constructor(public http: Http, @Inject(APP_CONFIG) private config: IAppConfig) {\n    console.log('Hello WalletProvider Provider');\n  }\n\n  requestBalance(device_id:number){\n    return this.http.get(this.config.apiEndpoint + `wallet/${device_id}/balance`)\n      .map(res =>  res.json())\n      .catch((err:Response) => {\n        return Observable.throw(err);\n      });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/wallet/wallet.ts"],"sourceRoot":""}